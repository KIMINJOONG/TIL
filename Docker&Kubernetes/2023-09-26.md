# 효율적인 컨테이너 간 통신을 위한 Docker 네트워크 추가하기

- 새 네워크를 만들어보자

  1. docker network create goals-net

- 모든 컨테이너를 시작하여 그 컨테이너 모두를 위의 새로만든 네트워크에 넣어보자.
  1. mongodb 컨테이너 재시작 명령어에 --network goals-net 추가
  2. 백엔드 컨테이너 시작 마찬가지로 포트 게시 x --network goals-net 추가
     - 이게 다일까? 백엔드는 mongoDB에 연결된다 host.docker.internal을 mongodb로 변경
     - 이미지 리빌드후 다시 실행
  3. 프론트엔드 localhost 전부 노드 애플리케이션 컨테이너 이름으로 변경 goals-backend, 이미지 리빌드 후 실행
     - 에러가 발생함 왜?
     - React가 어떻게 작동하는지 알아야함
     - 노드 백엔드 애플리케이션의 경우 노드 런타임에 의해 컨테이너에서 직접적으로 실행
     - 백엔드의 React인 경우 그저 npm start만을 실행. 컨테이너 내부에서 실행되는것이 아니다. 항상 브라우저에서 실행됌. 이것은 버그가 아니다. React 코드에서는 전부 localhost로 돌린다. 이것은 브라우저가 이해할수있는 구조. localhost는 브라우저가 이해하는 식별자. 즉, 도커가 아니라 브라우저가 이해해야하는 코드를 해야한다.
     - 이미지 리빌드
     - 컨테이너 재시작 --network는 의미없는 옵션

4. 백엔드 컨테이너 중지후 재시작 but 포트게시를 로컬80과 컨테이너 내부80으로 추가
5. 정상동작
