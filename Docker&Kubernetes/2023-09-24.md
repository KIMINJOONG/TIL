# 몽고DB 서비스 도커화하기

1. docker run mongo로 실행하는데 컨테이너명은 mongodb, 컨테이너가 중지되면 삭제되게, detached모드로 할수있도록 옵션을 넣자. 아직 실행x

2. 백엔드와 프론트엔드가 아직 도커화 하지않았기에 1번의 명령어에 포트 27017을 노출하는 옵션을 추가하고 실행

# 노드 앱(백엔드) 도커화하기

1. Dockerfile 만들기

   - node를 기본 이미지로 사용. 이때 버전은 최신버전
   - WORKDIR은 /app 으로
   - package.json을 복사
   - 프로젝트의 모든 종속성을 설치하도록 명령어 추가(RUN)
   - 호스트 머신 프로젝트 폴더의 나머지 코드를 컨테이너의 작업 디렉토리로 COPY
   - 80 포트 노출
   - 이 이미지를 기반으로 컨테이너가 시작되어야할때 실행되어야하는 명령어 지정 (app.js를 node로 실행)

2. 이미지를 빌드하는데 태그는 goal-node로 지정
3. docker run 하는데 이름은 goals-backend, 컨테이너 중지되면 삭제되게 이번엔 attched모드로 시작
4. 도커화된 백엔드 애플리케이션에서 로컬호스트로 접근중이므로 동일한 백엔드 컨테이너 내부의 27017포트에서 그 서비스에 액세스하게 변경필요
   - host.docker.internal로 변경
5. 이미지 리빌드
6. 다시 컨테이너 실행
7. React 프론트엔드 애플리케이션이 백엔드와 통신이 불가함.
   - 백엔드가 컨테이너에서 실행되는 동안 노출되는 포트를 게시하지않았기때문.
8. 실행중인 컨테이너 중지후 이번엔 dettached모드로 하며, '-p'옵션을 사용하여 내부 포트 80을 게시.
