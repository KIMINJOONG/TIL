# 이미지는 읽기 전용!

- 이미지와 컨테이너가 작동하는 방식을 이해하기 위해 노드 애플리케이션 코드에서 코드를 변경하고싶다고 가정해보자

```
<h2>My Course Goal</h2> 을
<h2>My Course Goal!</h2>로 변경
```

    이것은 실행중인 애플리케이션에 반영되어야하는 HTML 코드에 대한 작은 변경사항이다.
    따라서 우리가 구축한 애플리케이션인 이미지를 기반으로 이 컨테이너를 다시 시작하면 노드 애플리케이션이 다시 시작된다.
    그리고 로컬로 접속하면 문제점을 발견할수있다
    그것은 바로 코드 변경사항이 반영되지않는것이다.

# 컨테이너를 다시 시작했음에도 변경사항이 적용되지 않은 이유는 뭘까?

- 우선 이미지가 작동하는 방식을 이해해야한다. 도커파일에서 우리는 도커에게 마지막으로 내 소스 코드를 컨테이너 파일 시스템에 보관하는 server.js파일을 포함하여
  프로젝트 폴더 내의 모든것을 app폴더에 정확하게 복사하도록 지시한다. 그런다음 npm install을 하고 포트80을 열고 컨테이너가 시작될때, 서버를 시작해야한다고 알려준다. **여기서 중요한 일은 소스코드를 이미지에 복사하고 기본적으로 복사한 시점에서 소스 코드의 스냅샷을 만든다.** 이후에 소스코드를 편집하면 변경사항은 이미지의 소스코드에 포함되지 않는다. 업데이트된 소스 코드를 새 이미지로 복사하려면 이미지를 다시 빌드해야한다. 코드를 변경할때마다 이미지를 다시 작성해야한다는게 번거롭고 이상하게 들린다면 나중에 코드에서 변경사항을 선택하는 더 우아하고 빠른 방법이 있다. 그러나 여기서 핵심은 **이미지는 기본적으로 잠겨있고 일단 빌드되면 끝이다.** 이미지의 모든것이 읽기 전용이며 과거에 해당코드를 복사했기때문에 단순히 코드를 업데이트하여 외부에서 편집할수가 없다. 이미지는 지난것에 대해 관심이 없다. 복사작업이 완료되면 외부 코드를 원하는대로 변경할수있고 삭제할수도 있지만 이미지는 영향을 받지않는다. 외부 변경사항을 집어내어 업데이트된 모든 코드를 기본적으로 이미지에 복사하려면 이미지를 다시 빌드해야한다. 즉 이미지가 결국 닫힌 템플릿이라는 것을 이해하는것은 매우 중요하다. 도커파일에 있는 명령어들은 이미지를 생성하기위해 실행되고, 그 후에는 잠겨서 완료된다. 그리고 그 이후에 이미지에 복사 된것을 변경해도 아무런 영향이 없다.
