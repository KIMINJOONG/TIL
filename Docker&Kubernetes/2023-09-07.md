# 볼륨 & 마운트 요약

- '--v' 옶션을 사용하는 기본적인 세가지 방식이 있다.

```
docker run -v /app/data ... // 익명의 볼륨을 생성 이름지정x
docker run -v data:/app/data ... 명명된 볼륨 생성 이름지정 o
docker run -v /path/to/code:/app/code ... // 실제로 호스트 머신의 폴더를 가리키는 절대 경로 그러므로 바인드 마운트
```

# 익명 볼륨

- 컨테이너에 연결된 일종의 볼륨을 생성
- 컨테이너가 제거 되면 볼륨 역시 제거됌
- 컨테이너 종료 후 다시 시작해도 컨테이너가 제거되면 익명 볼륨 역시 제거됌
- 컨테이너 실행시 --rm 사용했으면 컨테이너 중지시 익명볼륨 제거 됌
- 그렇기때문에 익명볼륨을 사용하여 컨테이너간에 데이터를 공유할수없다. 컨테이너의 파괴와 재생성에 걸쳐 데이터를 저장하는데 익명볼륨은 그에 적합하지않다. 하지만 Dockerfile의 VOLUME 명령으로 생성되거나 이와같이 '-v'로 생성된 익명볼륨은 컨테이너에 이미 존재하는 특정 데이터를 잠그는데 유용 이러한 데이터가 다른 모듈에 의해 덮어쓰여지는것을 방지하는데 유용
- 시간을 절약할수있다는데 특장점이 있다.
- 호스트 머신에 폴더를 생성한다.
- 이는 도커가 컨테이너 내부에 모든 데이터를 저장 할 필요가 없으며, 도커가 이 컨테이너 read-write레이어 내부의 모든 데이터를 관리할 필요는 없다는것을 의미 하지만 특정 데이터를 호스트 머신 파일 시스템에 아웃소싱할수있다. 이는 성능과 효율성에도 도음이 된다. 그렇기에 익명 볼륨은 자세히 살펴볼 가치가 있다.
- 또다른 익명 볼륨 생성을 고려할수도있다. Dockerfile의 내부에 'temp'폴더용으로! 컨테이너가 제거될때 temp폴더를 잃어도 된다. 예를 들어 약간의 성능 향상을 위해 temp 폴더를 익명 볼륨에 매핑할 가치가 있다 그래서 거기서 관리되는 데이터는 더 이상 도커 컨테이너에서 관리 되지 않는다. 하지만 실제로 호스트 파일시스템에
  잘 아웃소싱된다고 할수있다.

# 명명된 볼륨

- Dockerfile에서 생성 불가능
- 대신 컨테이너를 실행할 때 '-v' 명령으로 생성
- 콜론앞에 이름을 지정하기때문에 명명된 볼륨이라 함
- 명명된 볼륨의 가장 큰 장점은 일반적으로 생성된다는것
- 특정 컨테이너에 연결되어 있지않다.
- 컨테이너를 종료하고, 제거해도 살아남는다.
- 제거는 할수있으나 도커 CLI에 분리된 내장명령으로만 가능
- 이를 사용하여 여러 컨테이너간에 데이터 공유 가능 즉, 다수의 다양한 컨테이너에 동일하게 명명된 볼륨하나를 마운트 가능
- 데이터 저장용으로 사용 가능

# 바인드 마운트

- 호스트 머신에 데이터가 저장되는 위치를 알고있음.
- 바인드 마운트 또한 하나의 특정 컨테이너에 국한되지않고 다수 컨테이너 연결가능
- 컨테이너 종료 및 제거 후에도 유지
- 바인드 마운트 데이터를 지우려면 실제로 호스트 머신에서 삭제해야함 즉, 프로젝트 내의 모든 로컬 컨텐츠를 삭제해야만 컨테이너의 모든 데이터를 제거 할 수 있다.
- 컨테이너 간에 공유 가능
- 재시작을 거쳐 동일한 컨테이너 중 하나에서 재사용 가능

**위의 세가지는 컨테이너 내부 데이터를 관리하기 위한 주요한 방식 그 차이점이 무엇이며, 언제 어떤것을 사용하는지 명확히 이해하도록 하자!**
