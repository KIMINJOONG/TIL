# 모듈 요약

- 이미지를 빌드한 다음, 이 이미지를 기반으로 머신에서 컨테이너를 로컬로 시작하는 방법을 깊이 있게 해보았다.
- 동일한 컨테이너를 사용하여 AWS에 배포하는 법도 알아보았따. 자체 AWS를 설치하거나, ECS와 같은 관리형 서비스를 이용해서.

## 기억해야할점

- 예를 들어, 갭라중에 실행중인 컨테이너에 라이브 코드를 미러링 하기위해 중요한것은 바인드 마운트.
- 멀티스테이지 빌드와 그 Dockerfile

  - 예를 들어, React앱과 같이 빌드 단계가 필요한 애플리케이션의 경우.
  - 도커를 사용하여 코드를 로컬에서 실행할 수 있을 뿐만아니라, 부가적인 빌드 단계 없이는 작동하지 않는 애플리케이션을 배포할수있도록 하는 강력한 기능.

- 동일한 태스크 내에서 여러 컨테이너 배포하는 방법 동일한 호스트라 할수있으나, 여러 호스트에 걸쳐 분할하므로 다른 URL에서 실행
- 더 많은 통제력과 책임을 갖는것과 둘 다 덜 갖는 것 사이의 절충점
- 도커를 설치하기 위해 리모트 머신에 연결하는 법과 그 머신에 도커 설치를 사용하여 Docker Hub에 배포된 이미지를 가져와 리모트 머신에서 실행하는 법도 배움.
- Docker compose를 사용하여 머신에 무엇을 하든 원하는 도구 설치

  - 그에 따른 부가적 책임으로 인해 빌드하고자 하는 모든 애플리케이션에 대한 최상의 솔루션이 아닐수도있다. 실수로 인해 안전하지 않은 설정할 가능성 up
  - 그렇기때문에 ECS같은 관리형 서비스를 사용함

- ECS가 작동하는 방식, 컨테이너가 포함된 태스크로 작업하는방법, 태스크를 서비스로 시작하는방법, 동일 태스크 또는 여러 태스크에 걸쳐 하나 또는 여러개의 컨테이너를 가지는법. 또 한 탄력적 파일 시스템 서비스와 같은 AWS리소스를 살펴보고 컨테이너에 파일 시스템을 추가한 다음, 컨테이너에 볼륨을 추가하여 재배포되거나 삭제된 경우에도 데이터가 손실되지않도록 해봄.
- 자체 데이터베이스 컨테이너를 배포할수는 있지만, 그것들을 관리해야함. 성능, 확장성, 가용성뿐만아니라 백업 및 보안과 같은 측면으로 인해 어려움을 겪을수있기때문에 관리형 데이터베이스 서비스로의 전환을 고려하는것이 좋다.

- React SPA의 애플리케이션 코드에 대해 도커를 집중하고 그 데이터베이스의 책임을 호스팅 프로바이더로 옮겨 모든 무거운 작업을 처리하도록 함.
- 이 모듈 전체에서 도커가 설치된 자체 호스트 머신인 EC2에서 벗어나지않았고, ECS에 대한 완전 자체 관리형 접근 방식 사용
- 또 한 하나의 태스크로 배포되는 노드와 MongoDB컨테이너를 사용하여 ECS설정에서 관리하여 MongoDB Atlas도 추가해보았는데 작동하지 않는것으로 판명
- 동일한 ECS태스크에서 두개의 웹서버 시작x
- 결국 동일한 머신에서 시작. 마침내 우리는 서로 다른 태스크에서 여러 컨테이너를 실행하는 설정을 함
- 즉, AWS에서 서로 다른 호스팅 머신을 사용할수있다.
