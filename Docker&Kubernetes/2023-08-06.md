# 도커란?

- 도커는 쉽게 말하면 컨테이너 기술이다.
  - 컨테이너를 생성하고 관리하기 위한 도구

## 정확히 무슨 의미일까? 컨테이너는 뭐고 왜 사용해야할까?

- 소프트웨어 개발에서 컨테이너는 **표준화된 소프트웨어 유닛** 기본적으로 코드 패키지이며, 해당코드를 실행하는데 필요한 종속성과 도구가 포함되어있다는것이 중요하다
  - 예를 들어 NodeJS 애플리케이션 구축할 경우 도커로 빌드된 컨테이너가 있는 애플리케이션에 이러한 애플리케이션이 있는경우 그 컨테이너에는 애플리케이션 소스 코드 뿐만 아니라 NodeJS 런타임 그리고 코드를 실행하는데 필요한 기타 도구가 있을 수 있다. 동일한 NodeJS 코드와 동일한 NodeJS 도구를 사용하는 동일한 컨테이너는 항상 동일한 버전을 사용하는 동일한 NodeJS 런타임에 항상 동일한 동작과 결과를 제공한다는 이점이 있다.
  - 피크닉 바구니에는 필요한 모든것들 이있다. 음식, 필요한 접시 그 바구니를 가지고 피크닉을 가고자 하는 어디는 갈 수 있고 ㄹ친구와 공유 할 수 있고 그 친구는 ㅇ 내가 갈 수도 이었던 똑같은 피크닉을 갈 수도 있다. 접시와 음식이 있으니 음식을 차린후에 접시를 찾을 필요가 없다. 접시와 음식이 있으니 음식을 차린후에 접시를 찾을 필요가 없다. 이는 컨테이너와 도커의 배후의 개념과 동일 컨테이너를 관리하고 생성하기 위한 도구일 뿐

## 컨테이너란?

- 컨테이너를 생각하면 물건을 옮기기 위해 배나 트럭에 싣는 컨테이너가 떠오른다. **이는 도커 컨테이너와 동일한 개념** 이다. 우리는 이와 같이 표준화된 컨테이너를 가지고 있으며, 다양한 상품을 넣을수있지만 그 후에는 자체적으로 보관 및 격리된다. 한 컨테이너의 상품은 다른 컨테이너의 상품과 섞이지 않는다. 냉장이 필요한 경우 컨테이너에 내장 가능, 컨테이너는 스탠드얼론으로 작동하며 처리할 수 있는 모든 선박이나 트럭에 실을 수 있다. <u>그런점이 도커 컨테이너와 비슷하다.</u>
- 소프트웨어 유닛, 코드가 포함된 패키지 및 코드를 실행하는 종속성을 보관 할 수 있으며, 도커가 실행되는 모든곳에서 이를 가져 올 수 있다. 그러면 동일한 환경에서 정확히 동일한 애플리케이션을 실행할 수 있다. 모든것이 컨테이너에 있기때문에 실행하려는 위치에 추가도구를 설치하는것에 대해 걱정할 필요가 없다. <u>그것이 컨테이너이며 도커이다.도커는 이러한 컨테이너를 구축하기 위한 도구일 뿐이다.</u> 이제 좋은점은 컨테이너 지원이 최신 운영체제에 내장되어있거나 최소한 시작하기 쉽고 도커를 모든 최신 운영 체제에 설치하여 작업 할 수 있다. **도커는 결국 이러한 컨테이너의 생성 및 관리 프로세스를 단순화하는 도구이다.** 컨테이너를 만들지 않아도 되긴하지만 컨테이너를 만드는것은 사실상의 표준이다. 작업을 매우 간단하게 만들기 때문

# 왜 우리는 소프트웨어 개발에서 독립적인 표준화된 애플리케이션 패키지를 원하는 걸까?

- 우리는 종종 다른 개발 제품 생산 환경을 가지게 된다. 간단한 예를 들면 NodeJS 애플리케이션을 생성했다고 해보자<br/>
  그리고 거기에 NodeJS 버전 14.3에서 성공적으로 실행되는 몇가지 코드가 있다고 가정<br/>
  async await을 실행하려면 14.3버전 이상이여야하는데 그 버전이 로컬환경, 개발환경 or 로컬머신에만 설치되어있을수 있다.<br/>
  하지만 이 응용 프로그램을 가져와서 호스트되어야 하는 서버의 일부 원격 시스템에 배포하여 전 세계가 연결 할 수 있도록 하는 경우 해당 원격 시스템에 이전버전의 NodeJS가 있을수있다.<br/>
  14.1, 12, 8등 그렇게 되면 로컬에서는 작동되었으나 배포하려는 서버에선 동작하지 않을수잇다. 그리고 무엇이 잘못되었는지 문제를 파악하는데 시간이 걸릴수있음.<br/> 따라서 동일한 것을 가지고 있다는것, 즉, **제품 생산에서 가지고 있는것과 똑같은 개발환경을 갖는것은 상당한 가치가 있다. 그것이 도커와 컨테이너가 도움이 되는 부분이다.**<br/>
  <u>특정 노드버전을 도커 컨테이너에 고정 할수 있으므로 코드가 항상 정확한 버전으로 실행될수있도록 할수있고 잠재적인 문제는 사라지며 더 이상 발생하지않을것이다. 애플리케이션이 자체적으로 필요한 NodeJS 버전을 제공하는 컨테이너에서 실행되기 때문이다.</u><br/>

- 또 다른예는 팀이나 회사 내의 각각의 개발환경이다.<br/>
  각 팀이 동일한 프로젝트를 작업할때 한동안 Node 작업을 하지않거나 업데이트할일이 없어서 시스템에 여전히 이전버전의 NodeJS를 가지고있고, 다른 개발자는 최신버전의 NodeJS 수준의 코드를 작성한다면 하위버전을 가지고있는 사람의 로컬환경에서는 작동하지않을것이다.<br/>
  우리가 같은 코드 기반에서 함께 작업 할 수 없다는것은 짜증나고 항상 작동할것이라는 보장도 없고 항상 같은 환경을 사용한다는 보장도 없다.<br/>
  소프트웨어 개발에서는 이러한 재현성을 원하므로 **현재 배포하지않는 경우에도 컨테이너에 코드가 필요로하는 모든것을 포함하는 환경을 보유하는 것은 상당한 가치가 있다.** <br/>
  마지막으로 중요한것은 혼자 작업하는 경우에도 유용하다. 작업중인 프로젝트가 여러개인 경우 충돌하는 버전이 있을 수 있기때문이다. 어떤곳은 Python2, 최신 버전의 Python 이렇게 되면 A라는 작업을할때, B라는 작업을 할때마다 잘못된 버전을 제거하고 올바른 버전을 설치해야할수있다.

# 가상머신 VS Docker

## 가상머신

- <u>호스트 운영체제 즉 Windows MacOS Linux가 있고 그 위에 버츄얼 머신을 설치한다는 뜻 말하자면 컴퓨터 내부의 컴퓨터</u><br/>
  그 버츄얼 머신 내부에서 실행되는 자체 운영체제인 가상 운영체제인 리눅스가 있다고 치자, 이 버츄얼 머신은 컴퓨터와 같기때문에 에뮬레이트가 가능하고 내부에 추가 도구를 설치할수있다.<br/>
  **가상으로 존재하지만 다른 머신이기때문에 원하는 모든것을 설치할수있다.** <br/>
  <u>필요한 라이브러리 종속성 및 도구 설치 소스코드도 이동하고 캡슐화된 머신이기때문에 도커, 컨테이너와 동일한 결과를 얻을수있다.</u><br/>
  모든것이 보유된 캡슐화된 환경, 그런 다음 서로 다른 프로젝트에 대해 이러한 환경을 여러개 가질수있고, 구성을 동료와 공유하여 동일한 환경에서 작업하고 있는지 확인도 가능하다 그러나 몇가지 문제가 있다.<br/>
  가장 큰 문제는 가상 운영체제를 지닌 버츄얼 머신에서 발생하는 오버에드이다.<br/>
  **모든 머신은 실제로 우리 머신 위에서 실행되는 스탠드얼론 컴퓨터와같다. 특히 이런 머신이 여러대 있는경우에는 매번 새로운 컴퓨터를 머신 내부에 설치해야하고 메모리 CPU 하드 드라이브의 공간을 낭비하게된다.**그래서 머신이 많아질수록 문제가 된다.<br/>
  항상 동일하게 복제되는 많은것들이 여전히 존재 **특히 운영체제**가 그렇다.<br/>
  모든 머신에서 리눅스를 사용한다해도 여전히 모든 머신에 별도로 설치되어 있다. 그리고 그것은 공간을 낭비한다. 또한 모든 머신에 다른 도구들이 설치되어있고 도구는 애플리케이션에 직접적으로 필요하진않지만 디폴트로 설치되어있는것이다.<br/>
  장점으로는

  1. 분리된 환경을 가질수 있고,
  2. 환경별 구성을 가질 수 있으며 모든것을 안정적으로 공유하고 재생산햘 수 있다<br/>

  그러나 **이러한 중복 복제, 즉 낭비되는 공간이 발생한다.** 호스트 시스템위에 추가 시스템이 실행되고 있기에 성능이 나빠질수있으며 여러개 있는경우 실제로 성능저하가 일어난다. 재생산 및 공유가 가능하더라도 원하는 모든 시스템에 그 버츄얼 머신을 설정해야하고 정확히 동일한 방식으로 구성해야 하기때문에 까다로울수있다. 공유 할수 있는 단일 구성파일이 없는것이다. 개발에서 제품 생산으로 애플리케이션 배포시 동일한 방식으로 프로덕션 머신을 구성해야함. 혹은 프로덕션 머신에서 버츄얼 머신을 실행하지만 성능이 낭비되므로 프로덕션에서는 사용하고싶지 않을수있다.
  따라서 문제를 해결하긴 하지만 완벽하지 않다. 그래서 도커와 컨테이너를 사용하는것

## 도커

- 컨테이너를 사용하면 여전히 호스트 운영체제가 존재하지만 **하나의 머신에 몇대의 머신을 설치하지는 않는다.**<br/>
  그 대신 운영 체제가 기본적으로 내재하고 있거나, 컨테이너 에뮬레이트를 지원하는 내장 컨테이너를 활용 도커는 이것이 작동하도록 처리<br/>
  그리고 그위에 도커엔진이라는 도구를 실행, 뿐만 아니라 그것을 설치할때 도커에 의해 모두 설정됌<br/>
  그런 다음 현재 시스템에서 실행되는 <u>도커 엔진을 기반으로 하여 컨테이너를 가동 도커엔진은 하나의 도구에 불과하며, 여기에는 가벼운 소형도구만 설치되었을뿐 여러개의 컨테이너로 분리가능 이러한 컨테이너에는 코드와 중요한 도구 및 런타임이 포함되어 있지만 부풀려진 운영체제, 수많은 추가도구 이와 유사한것을 포함하지않는다.</u>
  컨테이너 내부에 작은 운영체제 레이어가 있을순있지만 가상머신에 설치하는것보다 훨씬 작은 운영체제의 매우 가벼운 버전일뿐이다.<br/>
  컨테이너의 또 다른 좋은점은 구성파일을 사용하여 컨테이너를 구성하고 그를 설명할수있다. 그런 다음 다른 사람들과 공유하여 다른 사람들이 컨테이너를 다시 만들 수 있도록 하거나 컨테이너를 이미지라 불리우는것에 빌드 할 수 있다. 그 이미지를 다른 사람과 공유하여 모든사람이 자신의 시스템에서 여러분의 시스템이 있는 동일한 컨테이너를 시작 할수있도록 할 수 있다.</br>

## 도커와 가상머신 요약

- 도커

  1. 운영 체제와 시스템에 미치는 영향이 적다
  2. 매우 빠르다
  3. 최소한의 디스크공간을 사용
  4. 이러한 이미지와 구성 파일이 있기 때문에 공유, 재구축 및 배포하는것이 매우 쉽다.
  5. 여전히 앱에 필요한 모든것을 캠ㅂ슐화한 앱과 환경을 보유하지만 쓸데없는 부가적인것이 없다.

- 가상 머신(버츄얼 머신)

  1. 속도가 느리고, 디스크 공간을 더 많이 차지
  2. 공유, 재구축 및 배포 모두 수행할순 있지만 컨테이너와 도커보다 까다로움
  3. 환경을 캡슐화하지만 앱과 앱을 실행하는데 필요한것만 캡슐화하는게 아니라 컴퓨터 전체를 캡슐화
  4. 버츄얼 머신은 드물게 유용할수있지만 반드시 필수적이지 않은 거품이 낀 완전히 별도의 머신을 갖는것과 같다.
