# Nginx 컨테이너 추가

1. docker-laravel폴더를 만들자.
2. docker-compose.yaml 추가
   - 도커 컴포즈를 사용하여 애플리케이션 컨테이너와 유틸리티 컨테이너를 보유할 예정
   1. version은 3.8
   2. service 지정
   - server서비스인 nginx 서버 추가(이 서버는 모든 요청을 받아들여 PHP인터프리터를 트리거)
   - php컨테이너 추가(PHP코드와 Laravel 코드 실행)
   - mysql 컨테이너 추가
   - composer라는 유틸리티 컨테이너 추가
   - artisan 유틸리티 컨테이너 추가
   - npm 유틸리티 컨테이너 추가
3. nginx 컨테이너부터 시작
   - 강력하고 효율적인 웹서버 Nginx
   - MongoDB와 NodeJS와 마찬가지로 공식 이미지가 존재(도커허브)
   1. image는 공식 이미지인 nginx qjwjsdms stable-alpine으로(아주 슬림한 Linux 운영체제 레이어 기반)
   2. 포트 노출(공식 문서참조 내부적으로 노출되는 포트는 80)
   3. 이 애플리케이션이 해야할일은 들어오는 요청을 살펴보고 PHP 컨테이너로 전달해야함 따라서 자체 구성을 제공하기 위해 volumes 키로 바인드 마운트 추가
   - 전체 폴더를 바인딩하지 않기위해 개별 파일을 대상으로 지정
   - 경로는 공식문서에 나와있는걸로 따름.(읽기 전용으로 한다 컨테이너가 그 구성을 변경해서는 안되기 때문)
   - nginx.conf에는 포트 80에서 수신대기하는 nginx 구성이 있다. 다른 포트에서 수신대기하고싶다면 conf파일에서 변경가능
   - 그다음 index 파일에 대한 요청처리
   - 들어오는 요청에 응답하는데 사용 할 수 있는 파일을 root에 명시된 디렉토리에서 찾음(현재는 컨테이너에도 없고 디렉토리에도 존재 x)
   - 모든 수신 요청을 기본적으로 index.php 파일로 리디렉션 or PHP파일을 대상으로 하는 요청이 PHP 인터프리터로 전달되도록하는 리디렉션 규칙이 존재
